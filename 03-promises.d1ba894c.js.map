{"mappings":"AAAA,IAAIA,EAAc,EACdC,EAAa,EACbC,EAAY,EAChBC,KAAO,CACLC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,SAC9BE,IAAKH,SAASC,cAAc,WAE9BG,QAAQC,IAAIP,KAAKC,MACjBK,QAAQC,IAAIP,KAAKI,OACjBE,QAAQC,IAAIP,KAAKK,KAGjBL,KAAKC,KAAKO,iBAAiB,UAI3B,SAAsBC,GACpBA,EAAEC,iBAEF,IAAIC,MAAEA,EAAKC,KAAEA,EAAIC,OAAEA,GAAWJ,EAAEK,cAEhChB,EAAaa,EAAMI,MAEnBhB,EAAYa,EAAKG,MA8BnB,SAAeH,EAAMC,GACnBG,MAAQ,EACoBV,QAApBC,IAAIM,GACZP,QAAQC,IAAIK,GACZ,MAAMK,EAAM,IACNC,EAAO,IAEbC,WAAaC,aAAY,WACvBd,QAAQC,IAAKU,GAAOC,EAAOD,GAC3BD,OAAS,EAELA,OAASH,GACXQ,cAAcF,YAvCpB,SAAuBG,EAAUX,GAC/B,MAAMY,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3B/B,GAAe,EAEfuB,aAAY,KACNG,EAEFI,EAAQ,C,SAAEL,E,MAAUX,IAGpBiB,EAAO,C,SAAEN,E,MAAUX,MAEpBA,MAKLkB,CAAchC,EAAaC,GACxBgC,MAAK,EAACR,SAAEA,EAAQX,MAAEA,MACjBL,QAAQC,IAAI,uBAAqBe,QAAiBX,UAEnDoB,OAAM,EAACT,SAAEA,EAAQX,MAAEA,MAClBL,QAAQC,IAAI,sBAAoBe,QAAiBX,YAmBlDC,GA5CHoB,CAAMjC,EAAWc,EAAOE","sources":["src/js/03-promises.js"],"sourcesContent":["let positionNum = 1;\nlet firstDelay = 0;\nlet delayStep = 0;\nrefs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('input'),\n  btn: document.querySelector('button'),\n};\nconsole.log(refs.form);\nconsole.log(refs.input);\nconsole.log(refs.btn);\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\nrefs.form.addEventListener('submit', onSobmitForm);\n// refs.btn.addEventListener('click', onBtn);\n//////////////////////////////////////////////////\n\nfunction onSobmitForm(e) {\n  e.preventDefault();\n\n  let { delay, step, amount } = e.currentTarget;\n\n  firstDelay = delay.value;\n\n  delayStep = step.value;\n  onBtn(delayStep, amount.value);\n}\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    positionNum += 1;\n\n    setInterval(() => {\n      if (shouldResolve) {\n        // Fulfill\n        resolve({ position, delay });\n      } else {\n        // Reject\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction funcBefore() {\n  createPromise(positionNum, firstDelay)\n    .then(({ position, delay }) => {\n      console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    })\n    .catch(({ position, delay }) => {\n      console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n    });\n}\n\nfunction onBtn(step, amount) {\n  count = 0; // начальное значение повтореений\n  console.log(amount);\n  console.log(step);\n  const foo = 1000;\n  const foo1 = 500;\n\n  intervalId = setInterval(function () {\n    console.log((foo += foo1 + foo));\n    count += 1;\n    // console.log((firstDelay = firstDelay + step));\n    if (count == amount) {\n      clearInterval(intervalId);\n    }\n    funcBefore();\n  }, step);\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// const mass = ['Roman', 'Ragnar', 'Thor', 'Odin']; // массив объектов\n// const promises = mass.map(prom); // возвращает массив объектов\n// // const promises = mass.map(mas => prom(mas)); // идентичная запись что и выше\n// function prom(mas) {\n//   const TIME = 2000; // дефолт интервала\n//   return new Promise(resolve => {\n//     setTimeout(() => {\n//       resolve(mas);\n//     }, TIME);\n//   }); // промис БЕЗ обработки ощибки\n// }\n// prom(promises).then(x => console.log(x)); // результат и вызов промиса\n"],"names":["$47d4ff9957288465$var$positionNum","$47d4ff9957288465$var$firstDelay","$47d4ff9957288465$var$delayStep","refs","form","document","querySelector","input","btn","console","log","addEventListener","e","preventDefault","delay","step","amount","currentTarget","value","count","foo","foo1","intervalId","setInterval","clearInterval","position","shouldResolve","Math","random","Promise","resolve","reject","$47d4ff9957288465$var$createPromise","then","catch","$47d4ff9957288465$var$onBtn"],"version":3,"file":"03-promises.d1ba894c.js.map"}