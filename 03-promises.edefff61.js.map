{"mappings":"YAAA,IAAIA,EAAc,EAClBC,KAAO,CACLC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,SAC9BE,IAAKH,SAASC,cAAc,WAE9BG,QAAQC,IAAIP,KAAKC,MACjBK,QAAQC,IAAIP,KAAKI,OACjBE,QAAQC,IAAIP,KAAKK,KAGjBL,KAAKC,KAAKO,iBAAiB,UAI3B,SAAsBC,GACpBA,EAAEC,iBAEF,IAA8BC,EAAAF,EAAEG,cAA1BC,EAAwBF,EAAxBE,MAAOC,EAAiBH,EAAjBG,KAAMC,EAAWJ,EAAXI,OAEnBT,QAAQC,IAAIM,EAAMG,OAkCpB,SAAeF,EAAMC,GACnBE,MAAQ,EACoBX,QAApBC,IAAIQ,GACZT,QAAQC,IAAIO,GACZI,WAAaC,aAAY,WACvBF,OAAS,EACLA,OAASF,GACXK,cAAcF,YAlCpB,SAAuBG,EAAUR,GAC/B,IAAMS,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B5B,GAAe,EAEfoB,aAAY,WACNG,EAEFI,EAAQ,CAAEL,WAAUR,UAGpBc,EAAO,CAAEN,WAAUR,YAEpBA,MAKLe,CAAc7B,EAAa,KACxB8B,MAAK,SAAAC,G,IAAGT,EAAQS,EAART,SAAUR,EAAKiB,EAALjB,MACjBP,QAAQC,IAAI,uBAAwCwB,OAAfV,EAAS,QAAYU,OAANlB,EAAM,UAE3DmB,OAAM,SAAAF,G,IAAGT,EAAQS,EAART,SAAUR,EAAKiB,EAALjB,MAClBP,QAAQC,IAAI,sBAAuCwB,OAAfV,EAAS,QAAYU,OAANlB,EAAM,YAc1DC,GAxCHmB,CAAMnB,EAAKE,MAAOD,EAAOC,U","sources":["src/js/03-promises.js"],"sourcesContent":["let positionNum = 1;\nrefs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('input'),\n  btn: document.querySelector('button'),\n};\nconsole.log(refs.form);\nconsole.log(refs.input);\nconsole.log(refs.btn);\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\nrefs.form.addEventListener('submit', onSobmitForm);\n// refs.btn.addEventListener('click', onBtn);\n//////////////////////////////////////////////////\n\nfunction onSobmitForm(e) {\n  e.preventDefault();\n\n  let { delay, step, amount } = e.currentTarget;\n\n  console.log(delay.value);\n\n  // console.log(step.value);\n  // console.log(amount.value);\n  onBtn(step.value, amount.value);\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    positionNum += 1;\n\n    setInterval(() => {\n      if (shouldResolve) {\n        // Fulfill\n        resolve({ position, delay });\n      } else {\n        // Reject\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction funcBefore() {\n  createPromise(positionNum, 1000)\n    .then(({ position, delay }) => {\n      console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    })\n    .catch(({ position, delay }) => {\n      console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n    });\n}\n\nfunction onBtn(step, amount) {\n  count = 0; // начальное значение повтореений\n  console.log(amount);\n  console.log(step);\n  intervalId = setInterval(function () {\n    count += 1;\n    if (count == amount) {\n      clearInterval(intervalId);\n    }\n    funcBefore();\n  }, step);\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n// const mass = ['Roman', 'Ragnar', 'Thor', 'Odin']; // массив объектов\n// const promises = mass.map(prom); // возвращает массив объектов\n// // const promises = mass.map(mas => prom(mas)); // идентичная запись что и выше\n// function prom(mas) {\n//   const TIME = 2000; // дефолт интервала\n//   return new Promise(resolve => {\n//     setTimeout(() => {\n//       resolve(mas);\n//     }, TIME);\n//   }); // промис БЕЗ обработки ощибки\n// }\n// prom(promises).then(x => console.log(x)); // результат и вызов промиса\n"],"names":["$ce04d3a99e08e73b$var$positionNum","refs","form","document","querySelector","input","btn","console","log","addEventListener","e","preventDefault","_currentTarget","currentTarget","delay","step","amount","value","count","intervalId","setInterval","clearInterval","position","shouldResolve","Math","random","Promise","resolve","reject","$ce04d3a99e08e73b$var$createPromise","then","param","concat","catch","$ce04d3a99e08e73b$var$onBtn"],"version":3,"file":"03-promises.edefff61.js.map"}